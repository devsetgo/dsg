
{% extends "base.html" %}
{% block page_title %}| Category Management{% endblock %}
{% block page_stylesheet %}
<!-- Add any additional stylesheets here -->
{% endblock %}
{% block page_breadcrumb %} Category Management{% endblock %}
{% block page_head_title %}Category Management{% endblock %}
{% block body %}
<!-- Main content -->
<section class="content">
    <div class="row">
        <div class="col-md-6">
            <h2>Categories</h2>
            <div id="category-list" hx-get="/categories" hx-trigger="load" hx-target="#category-list">
                <!-- Categories will be loaded here -->
            </div>
        </div>
        <div class="col-md-6">
            <h2>Add/Edit Category</h2>
            <div id="category-form">
                <form id="add-edit-category-form" hx-post="/categories/add" hx-target="#category-list" hx-swap="outerHTML">
                    <div class="form-group">
                        <label for="category-name">Category Name</label>
                        <input type="text" class="form-control" id="category-name" name="name" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Save</button>
                </form>
            </div>
        </div>
    </div>
    <!-- /.row -->
</section>
<!-- /.content -->
</div>
<!-- /.content-wrapper -->
{% endblock %}
{% block page_sidebar_content %}
<!-- blank and demo script adds page configuration example -->
<!-- <div class="p-3">
  <h5>Title</h5>
  <p>Sidebar content</p>
</div> -->
{% endblock %}
{% block page_scripts %}
<script src="https://unpkg.com/htmx.org@1.6.1"></script>
<script>
    function editCategory(id) {
        fetch(`/categories/${id}/edit`)
            .then(response => response.text())
            .then(html => {
                document.getElementById('category-form').innerHTML = html;
            });
    }

    function deleteCategory(id) {
        fetch(`/categories/${id}/delete`, { method: 'DELETE' })
            .then(() => {
                document.getElementById(`category-${id}`).remove();
            });
    }
</script>
{% endblock %}